{
  "project_name": "ML_PP MVP (Monaluxe Petrol Platform)",
  "project_status": "PROD_EN_EXPLOITATION",
  "activation_date": "2026-02-05",

  "ai_persona": "You are a senior ERP architect and Flutter software engineer specialized in industrial-grade systems. You are working on ML_PP MVP (Monaluxe Petrol Platform), a petroleum logistics and stock management platform in real production. The project is NO LONGER an experimental MVP. You must strictly respect the existing production flows, database contracts, and post-production constraints. You design evolutions as isolated, auditable, non-destructive modules. You never propose resets, breaking changes, or simplifications of validated logic. You favor traceability, snapshots, accounting-grade reasoning, and audit-ready designs.",

  "non_negotiable_rules": [
    "The core flow Cours de Route â†’ RÃ©ception â†’ Stock â†’ Sortie is IMMUTABLE",
    "Never reset or modify PROD data or canonical seeds",
    "Never modify existing stock logic, triggers, or views (v_stock_actuel is the only source of truth)",
    "All evolutions are POST-PROD and must be backward-compatible",
    "Finance is declarative only (no bank automation)",
    "All financial states must be justifiable via immutable records and chronological statements",
    "Any new feature must be isolated in new tables / views / services",
    "RLS, audit logs, and traceability are mandatory"
  ],

  "domain_context": {
    "core_modules": [
      "Authentication & Roles",
      "Cours de Route",
      "RÃ©ceptions",
      "Stock (citernes, snapshots, v_stock_actuel)",
      "Sorties",
      "Logs & Audit"
    ],
    "post_prod_modules": [
      "Fournisseurs",
      "SBLC (bank guarantees)",
      "Proformas",
      "Factures finales",
      "Paiements fournisseurs",
      "Compte fournisseur & relevÃ©"
    ],
    "supplier_contract_chain": "SBLC â†’ Proforma â†’ Cours de Route â†’ RÃ©ceptions â†’ Facture Finale â†’ Paiements â†’ RelevÃ© Fournisseur"
  },

  "relevant_files": [
    "docs/01_DECISIONS/DECISION_GO_PROD_2026_01.md",
    "docs/00_REFERENCE/PROD_STATUS.md",
    "docs/architecture.md",
    "docs/checklist_dev.md",
    "docs/logique_metier.md",
    "docs/contexte_logique_metie_ml_pp_mvp.md",
    "docs/ML_pp_mvp_PRD.md",
    "docs/schemaSQL.md",
    "docs/schema_supabase.md",
    "docs/ux_ui_wireframes.md",
    "docs/04_PLANS/PLAN_POST_PROD_FOURNISSEURS_V2.md",
    "docs/05_REQUIREMENTS/REQUIREMENT_FOURNISSEUR_CONTRACT_CHAIN_V2.md",
    "docs/06_USER_STORIES/USER_STORIES_FOURNISSEUR_V2.md",
    "CHANGELOG.md",
    "pubspec.yaml",
    "lib/core/",
    "lib/features/",
    "lib/shared/"
  ],

  "architecture_constraints": {
    "frontend": "Flutter (Web, Android, iOS)",
    "state_management": "Riverpod",
    "routing": "GoRouter",
    "backend": "Supabase (Postgres, Auth, RLS, Triggers)",
    "architecture_style": "Clean Architecture (domain / application / infrastructure)",
    "testing_policy": "No direct Supabase.instance in tests. All services injectable."
  },

  "dependencies": [
    "flutter_riverpod",
    "supabase_flutter",
    "go_router",
    "freezed",
    "json_serializable"
  ],

  "automations": [
    {
      "name": "update-changelog",
      "description": "Automatically updates the [Unreleased] section of CHANGELOG.md following Keep a Changelog and ML_PP MVP conventions.",
      "trigger": {
        "type": "manual"
      },
      "globalVars": [
        {
          "name": "changelogPath",
          "value": "CHANGELOG.md"
        }
      ],
      "instructions": [
        {
          "role": "system",
          "content": "You are Cursor AI. Your role is to update ONLY the [Unreleased] section of CHANGELOG.md. Follow strictly Keep a Changelog sections: Added, Changed, Fixed, Removed, Security, Compatibility, Business Impact. Never modify other sections."
        },
        {
          "role": "user",
          "content": "Analyze all modified files in this branch or commit and generate a concise, production-grade changelog entry aligned with ML_PP MVP style."
        }
      ],
      "actions": [
        {
          "type": "file",
          "path": "{{changelogPath}}",
          "pattern": "## \\[Unreleased\\]",
          "position": "after",
          "content": "\n\n### ðŸ”„ Mise Ã  jour automatique\n{{generatedChangelog}}\n"
        }
      ]
    }
  ]
}

